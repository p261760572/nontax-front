<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>对账信息查询</title>
    <link href="../lib/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <link href="../lib/layer/theme/default/layer.css" rel="stylesheet">
    <link href="../lib/jquery-easyui/themes/bootstrap/easyui.min.css" rel="stylesheet">

</head>

<body>
<div class="page">
    <form id="ff" data-options="onSerialize:serializeSearch">
        <table class="table" style="width: 970px;">
            <caption>查询条件</caption>
            <tbody>
            <!--<tr>-->
            <!--<td class="text-right col-sm-2">-->
            <!--<label>交易渠道</label></td>-->
            <!--<td class="col-sm-4">-->
            <!--<select id="trans_chnl" name="trans_chnl" class="easyui-validatebox" data-options="">-->
            <!--<option value="" selected="selected">全部</option>-->
            <!--<option value="0">互联网</option>-->
            <!--<option value="1">POS</option>-->
            <!--<option value="2">移动互联网</option>-->
            <!--<option value="3">POS通</option>-->
            <!--</select>-->
            <!--</td>-->
            <!--<td class="text-right col-sm-2">-->
            <!--<label>交易类型</label></td>-->
            <!--<td class="col-sm-4">-->
            <!--<select id="trans_type" name="trans_type" class="easyui-validatebox" data-options="" style="width: 150px;">-->
            <!--<option value="" selected="selected">全部</option>-->
            <!--<option value="0001">支付</option>-->
            <!--<option value="0002">退付</option>-->
            <!--</select>-->
            <!--</td>-->
            <!--</tr>-->
            <!---->
            <!--<tr>-->
            <!--<td class="text-right col-sm-2">-->
            <!--<label>手续费类型</label></td>-->
            <!--<td class="col-sm-4">-->
            <!--<select id="feeid" name="feeid" class="easyui-validatebox" data-options="" style="width: 150px;">-->
            <!--<option value="" selected="selected">全部</option>-->
            <!--</select>-->
            <!--</td>-->
            <!--<td class="text-right col-sm-2">-->
            <!--<label>系统参考号</label></td>-->
            <!--<td class="col-sm-4">-->
            <!--<input type="text" name="refnbr" class="easyui-validatebox" data-options="">-->
            <!--</td>-->
            <!--</tr>-->
            <!---->
            <!--<tr>-->
            <!--<td class="text-right col-sm-2">-->
            <!--<label>所在地区</label>-->
            <!--</td>-->
            <!--<td class="col-sm-4">-->
            <!--<select id="citycode" name="citycode" class="easyui-validatebox" data-options="" style="width: 150px;">-->
            <!--<option value="" selected="selected">全部</option>-->
            <!--</select>-->
            <!--<select id="areacode" name="areacode" class="easyui-validatebox" data-options="" style="width: 150px;">-->
            <!--<option value="" selected="selected">全部</option>-->
            <!--</select>-->
            <!--</td>-->
            <!--<td class="text-right col-sm-2">-->
            <!--<label>非税地区码</label></td>-->
            <!--<td class="col-sm-4">-->
            <!--<input type="text" id="fscode" name="fscode" class="easyui-validatebox" data-options="">-->
            <!--</td>-->
            <!--</tr>-->
            <!---->
            <tr>

                <td class="text-right col-sm-2">
                    <label>清算日期</label>
                </td>
                <td class="col-sm-4">
                    <input id="settledate" type="text" class="Wdate" name="settledate" style="width: 120px;"
                           onfocus="WdatePicker({onpicked:function(){$dp.$('settledate2').focus();},maxDate:'#F{$dp.$D(\'settledate2\')}'})">
                    <input id="settledate2" type="text" class="Wdate" name="settledate2" style="width: 120px;"
                           onfocus="WdatePicker({minDate:'#F{$dp.$D(\'settledate\')}'})">
                </td>
                <td class="text-right col-sm-2">
                    <label>交易渠道</label></td>
                <td class="col-sm-4">
                    <select name="trans_chnl" class="easyui-validatebox" data-options="">
                        <option value="" selected="selected">全部</option>
                        <option value="0">互联网</option>
                        <option value="1">POS</option>
                        <option value="2">移动互联网</option>
                        <option value="3">POS通</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td class="text-right col-sm-2">
                    <label>商户号</label></td>
                <td class="col-sm-4">
                    <input type="text" name="mchtid" class="easyui-validatebox" data-options="">
                </td>
                <td class="text-right col-sm-2">
                    <label>终端号</label></td>
                <td class="col-sm-4">
                    <input type="text" name="termid" class="easyui-validatebox" data-options="">
                </td>
            </tr>

            <tr>
                <td class="text-right col-sm-2">
                    <label>商户名称</label></td>
                <td class="col-sm-4">
                    <input type="text" name="mchtname" class="easyui-validatebox" data-options="">
                </td>
                <td class="text-right col-sm-2">
                    <label>卡号</label></td>
                <td class="col-sm-4">
                    <input type="text" name="cardno" class="easyui-validatebox" data-options="">
                </td>
            </tr>

            <tr>
                <td class="text-right col-sm-2">
                    <label>POS流水号</label></td>
                <td class="col-sm-4">
                    <input type="text" name="termssn" class="easyui-validatebox" data-options="">
                </td>
                <td class="text-right col-sm-2">
                    <label>参考号</label></td>
                <td class="col-sm-4">
                    <input type="text" name="refnbr" class="easyui-validatebox" data-options="">
                </td>
            </tr>
            <tr>
                <td class="text-right col-sm-2">
                    <label>非税地区码</label></td>
                <td class="col-sm-4">
                    <input type="text" name="fscode" class="easyui-validatebox" data-options="">
                </td>
                <td class="text-right col-sm-2">
                    <label>开户行代码</label></td>
                <td class="col-sm-4">
                    <input type="text" name="bankcode" class="easyui-validatebox" data-options="">
                </td>
            </tr>
            </tbody>
            <tfoot>
            <tr>
                <td></td>
                <td colspan="3">
                    <button type="button" class="btn btn-primary"
                            data-options="datagrid:'#dg',url:'/action/bm/fs-dz-result-his/search'"
                            onclick="$$.search(this)">查询
                    </button>
                    <button type="button" class="btn btn-default btn-outline" onclick="$$.reset(this)">重置</button>
                    <!--<button type="button" class="btn btn-success" data-options="datagrid:'#dg',url:'/action/bm/fs-dz-result-his/export'" onclick="$$.exportData(this)">导出明细</button>-->
                </td>
            </tr>
            </tfoot>
        </table>
    </form>
    <table id="dg" class="easyui-datagrid" title="查询结果"
           data-options="singleSelect:true,pagination:true,rownumbers:true,collapsible:true">
        <thead>
        <tr>
            <!--th data-options="field:'chk',checkbox:true"></th-->
            <th data-options="field:'settledate',width:80">清算日期</th>
            <th data-options="field:'transtime',width:140">交易时间</th>
            <th data-options="field:'trans_chnl',width:100">交易渠道</th>
            <th data-options="field:'trans_type',width:100">交易类型</th>
            <th data-options="field:'mchtname',width:200">商户名</th>
            <th data-options="field:'mchtid',width:150">商户号</th>
            <th data-options="field:'termid',width:80">终端号</th>
            <th data-options="field:'fscode',width:80">非税地区码</th>
            <th data-options="field:'refnbr',width:160">系统参考号</th>
            <th data-options="field:'fee_type',width:100">计费类型</th>
            <th data-options="field:'amount',width:120,formatter:formatAmount">交易金额</th>
            <!--<th data-options="field:'trans_fee',width:180">交易手续费</th>-->
            <!--<th data-options="field:'op',width:300,formatter:formatOp">操作</th>-->
        </tr>
        </thead>
    </table>
</div>

<script src="../lib/jquery/jquery.min.js"></script>
<script src="../lib/layer/layer.js"></script>
<script src="../lib/My97DatePicker/WdatePicker.js"></script>
<script src="../lib/jquery-easyui/jquery.easyui.min.js"></script>
<script src="../js/base.js"></script>
<script src="../js/st.js"></script>
<script src="../js/param.js"></script>
<script src="../js/district.js"></script>
<script>
    var query = $$.parseQueryString();
    var displayType = query.displayType;
    var operateType = query.operateType;

    var params = {
        mchttype: [{
            value: "0",
            text: "互联网"
        }, {
            value: "1",
            text: "POS"
        }, {
            value: "2",
            text: "移动互联网"
        }, {
            value: "3",
            text: "POS通"
        }
        ],
        review_status: [{
            value: "0",
            text: "未提交"
        }, {
            value: "2",
            text: "审核通过"
        }, {
            value: "3",
            text: "退回"
        }
        ],
        flag: [{
            value: "1",
            text: "2.0版本"
        }, {
            value: "2",
            text: "1.0版本"
        }
        ],
        mchtstate: [{
            value: "1",
            text: "启用"
        }, {
            value: "2",
            text: "关闭"
        }
        ]
    }

    function serializeSearch(data) {

    }

    function onClickRow(rowIndex, rowData) {

    }

    function formatAmount(value) {
        return value / 100;
    }

    function onChangeCity() {
        var value = $(this).val();
        $$.request('/action/bm/parameter/list', {
            city: value,
            district: '1'
        }, function (data) {
            $$.loadSelect('#areacode', data.district);
        });
    }

    function onChangeDistrict() {
        var value = $(this).val();
        $('#fscode').val(value);
    }

    function formatMchtType(value) {
        return $$.formatField(params['mchttype'], value);
    }

    function formatReview(value) {
        return $$.formatField(params['review_status'], value);
    }

    function formatFlag(value) {
        return $$.formatField(params['flag'], value);
    }

    function formatMchtState(value) {
        return $$.formatField(params['mchtstate'], value);
    }

    function formatOp(value, row) {
//        return '<a href="fs-dz-result-detail.html" class="btn btn-white btn-sm" data-toggle="view"><i class="fa fa-folder"></i> 查看 </a>';
    }

    $(function () {

//        $('#citycode').on('change', onChangeCity);
//
//        $('#areacode').on('change', onChangeDistrict);
//
//        $$.request('/action/bm/parameter/list', {
//            bank: '1',
//            city: '1',
//            fee: '1'
//        }, function (data) {
//            $$.loadSelect('#citycode', data.city);
//            $$.loadSelect('#feeid', data.fee);
//            $('#account_bank').combobox('loadData', data.bank);
//        });

    });
</script>
</body>

</html>